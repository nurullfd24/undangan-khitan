<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pratinjau Undangan Khitan</title>
  <style>
    * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body {
      margin: 0; min-height: 100vh;
      background: linear-gradient(180deg,#8b0000,#b22222);
      display: flex; justify-content: center; align-items: center; color: #fff;
      overflow: hidden;
    }
    .card {
      max-width: 420px; width: 100%;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
      border-radius: 20px; padding: 24px; text-align: center;
      display: none; /* awal disembunyikan, muncul setelah pop-up */
    }
    h1{font-size:26px;margin:8px 0} h2{font-size:20px;margin:8px 0}
    .guest{margin:10px 0;font-size:16px}

    /* Slider 3:4 */
    .slider{position:relative;width:100%;padding-top:133.33%; overflow:hidden;border-radius:16px;margin:16px 0}
    .slide{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;transform: translateX(100%);transition: transform .6s ease;}
    .slide.active{ transform: translateX(0); }
    .slide.prev{ transform: translateX(-100%); }
    .slide.active{opacity:1}

    .section{margin-top:22px}
    .section h3{margin-bottom:8px;font-size:18px;border-bottom:1px solid rgba(255,255,255,.3);padding-bottom:6px}
    .btn{width:100%;padding:12px;border-radius:12px;border:none;margin-top:8px;font-size:15px}
    .btn-green{background:#2ecc71;color:#fff}
    .btn-red{background:#e74c3c;color:#fff}
    .btn-gold{background:#f1c40f;color:#000}
    footer{margin-top:24px;font-size:12px;opacity:.85}

    .dots{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:6px}
    .dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.4)}
    .dot.active{background:#fff}

    /* POP-UP */
    #popup {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.7);
      display:flex; justify-content:center; align-items:center;
      z-index:1000;
    }
    #popupContent {
      background:#fff; color:#000; padding:20px; border-radius:16px; text-align:center; max-width:320px;
    }
    #popupContent button {margin-top:12px; padding:10px 16px; border:none; border-radius:10px; background:#b22222; color:#fff; font-size:16px; cursor:pointer;}
  </style>
</head>
<body>

  <!-- POP-UP NAMA TAMU -->
  <div id="popup">
    <div id="popupContent">
      <p>Kepada Yth:</p>
      <h2 id="popupGuestName">Tamu Undangan</h2>
      <button onclick="enterInvitation()">Buka Undangan</button>
    </div>
  </div>

  <div class="card" id="invitationCard">
    <h2>Undangan Khitan</h2>
    <h1>Achmad Ismail</h1>
    <div class="slider" id="slider">
      <img src="khitan/foto1.jpg" class="slide active">
      <img src="khitan/foto2.jpg" class="slide">
      <img src="khitan/foto3.jpg" class="slide">
      <img src="khitan/foto4.jpg" class="slide">
      <div class="dots" id="dots"></div>
    </div>
    <!-- Konten lainnya tetap sama -->
    <div class="section">
      <h3>üìÖ Detail Acara</h3>
      <p>Minggu, 25 Januari 2026<br>Pukul 09.00 WIB<br>Jakarta Utara</p>
      <p id="countdown">‚è≥ Menghitung waktu...</p>
      <a href="https://www.google.com/maps/place/Kost+Danis/@-6.1280686,106.8743555,47m/data=!3m1!1e3!4m6!3m5!1s0x2e6a1fd0c46840ad:0x37cf8541e4b83484!8m2!3d-6.1279646!4d106.8748049!16s%2Fg%2F11hbl2p_f5?entry=ttu&g_ep=EgoyMDI1MTIwOS4wIKXMDSoASAFQAw%3D%3D" target="_blank" style="text-decoration:none">
        <button class="btn btn-gold">üìç Buka Google Maps</button>
      </a>
    </div>
  </div>

<audio id="music" loop>
  <source src="backsound.mp3" type="audio/mpeg">
</audio>

<script>
  // ===== NAMA TAMU OTOMATIS =====
  const params = new URLSearchParams(window.location.search);
  const guest = params.get('to');
  const guestName = guest ? guest.replace(/\+/g,' ') : 'Tamu Undangan';
  document.getElementById('popupGuestName').innerText = guestName;

  function enterInvitation(){
    document.getElementById('popup').style.display = 'none';
    document.getElementById('invitationCard').style.display = 'block';
  }

  // ===== SLIDER FOTO + SWIPE =====
  let index = 0;
  const slides = document.querySelectorAll('.slide');
  const dotsContainer = document.getElementById('dots');
  const slider = document.getElementById('slider');

  slides.forEach((_,i)=>{
    const d = document.createElement('div');
    d.className = 'dot' + (i===0?' active':'');
    dotsContainer.appendChild(d);
  });
  const dots = document.querySelectorAll('.dot');

  function showSlide(i){
    slides.forEach((s,idx)=>{
      s.classList.remove('active','prev');
      if(idx === i) s.classList.add('active');
      else if(idx === i-1) s.classList.add('prev');
    });
    dots.forEach(d=>d.classList.remove('active'));
    dots[i].classList.add('active');
    index = i;
  }

  function next(){ showSlide((index+1)%slides.length); }
  function prev(){ showSlide((index-1+slides.length)%slides.length); }

  let startX = 0;
  slider.addEventListener('touchstart',e=>{ startX = e.touches[0].clientX; });
  slider.addEventListener('touchend',e=>{
    const endX = e.changedTouches[0].clientX;
    if(startX - endX > 50) next();
    if(endX - startX > 50) prev();
  });

  setInterval(next,4000);

  // ===== MUSIC =====
  const music = document.getElementById('music');
  const btn = document.getElementById('musicBtn');
  function toggleMusic(){
    if(music.paused){ music.play(); btn.innerText='‚è∏ Pause Musik'; }
    else { music.pause(); btn.innerText='‚ñ∂ Play Musik'; }
  }

  // ===== COUNTDOWN =====
  const eventDate = new Date('2026-01-25T09:00:00').getTime();
  const cd = document.getElementById('countdown');
  setInterval(() => {
    const now = new Date().getTime();
    const diff = eventDate - now;
    if(diff <= 0){ cd.innerHTML = 'üéâ Acara sedang berlangsung'; return; }
    const d = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff / (1000*60*60)) % 24);
    const m = Math.floor((diff / (1000*60)) % 60);
    cd.innerHTML = `‚è≥ ${d} hari ${h} jam ${m} menit`;
  }, 1000);
</script>
</body>
</html>
